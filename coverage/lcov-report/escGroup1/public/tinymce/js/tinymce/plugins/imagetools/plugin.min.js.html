<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for escGroup1/public/tinymce/js/tinymce/plugins/imagetools/plugin.min.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../../../../../index.html">All files</a> / <a href="index.html">escGroup1/public/tinymce/js/tinymce/plugins/imagetools</a> plugin.min.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/797</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/401</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/416</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/1</span>
      </div>
    </div>
    <p class="quiet">
      Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
    </p>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" >!<span class="fstat-no" title="function not covered" >fu</span>nction(s){"use strict";var r=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >t,</span>n=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return e}</span>;<span class="cstat-no" title="statement not covered" ></span>return{get:n,set:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >e=t}</span>,clone:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return r(n())}</span>}}</span>,</span>t=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.PluginManager"),</span>$=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.Tools");</span>function <span class="fstat-no" title="function not covered" >n(</span>t,e){<span class="cstat-no" title="statement not covered" >return i(s.document.createElement("canvas"),t,e)}</span>function <span class="fstat-no" title="function not covered" >o(</span>t){<span class="cstat-no" title="statement not covered" >return t.getContext("2d")}</span>function <span class="fstat-no" title="function not covered" >i(</span>t,e,n){<span class="cstat-no" title="statement not covered" >return t.width=e,t.height=n,t}</span>var h=<span class="cstat-no" title="statement not covered" >{create:n,clone:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e;<span class="cstat-no" title="statement not covered" >return o(e=n(t.width,t.height)).drawImage(t,0,0),e}</span>,resize:i,get2dContext:o,get3dContext:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >null;<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >e=t.getContext("webgl")||t.getContext("experimental-webgl")}</span>catch(n){}<span class="cstat-no" title="statement not covered" >r</span>eturn e||(e=null),e}</span>},</span>p=<span class="cstat-no" title="statement not covered" >{getWidth:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.naturalWidth||t.width}</span>,getHeight:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.naturalHeight||t.height}</span>},</span>g=<span class="cstat-no" title="statement not covered" >window.Promise?window.Promise:<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >if("object"!=typeof this)<span class="cstat-no" title="statement not covered" >throw new TypeError("Promises must be constructed via new");<span class="cstat-no" title="statement not covered" >i</span></span>f("function"!=typeof t)<span class="cstat-no" title="statement not covered" >throw new TypeError("not a function");<span class="cstat-no" title="statement not covered" >t</span></span>his._state=null,this._value=null,this._deferreds=[],l(t,r(o,this),r(a,this))}</span>,</span>e=<span class="cstat-no" title="statement not covered" >t.immediateFn||"function"==typeof window.setImmediate&amp;&amp;window.setImmediate||<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >s.setTimeout(t,1)}</span>;</span>function <span class="fstat-no" title="function not covered" >r(</span>t,e){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >t.apply(e,arguments)}</span>}</span>var n=<span class="cstat-no" title="statement not covered" >Array.isArray||<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return"[object Array]"===Object.prototype.toString.call(t)}</span>;</span>function <span class="fstat-no" title="function not covered" >i(</span>r){var o=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>null!==this._state?e(<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >o._state?r.onFulfilled:r.onRejected;<span class="cstat-no" title="statement not covered" ></span>if(null!==t){var e;<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >e=t(o._value)}</span>catch(n){<span class="cstat-no" title="statement not covered" >return void r.reject(n)}<span class="cstat-no" title="statement not covered" ></span>r</span>.resolve(e)}</span>else<span class="cstat-no" title="statement not covered" >(o._state?r.resolve:r.reject)(o._value)}</span></span>):this._deferreds.push(r)}</span>function <span class="fstat-no" title="function not covered" >o(</span>t){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >if(t===this)<span class="cstat-no" title="statement not covered" >throw new TypeError("A promise cannot be resolved with itself.");<span class="cstat-no" title="statement not covered" >i</span></span>f(t&amp;&amp;("object"==typeof t||"function"==typeof t)){var e=<span class="cstat-no" title="statement not covered" >t.then;<span class="cstat-no" title="statement not covered" ></span>if("function"==typeof e)<span class="cstat-no" title="statement not covered" >return void l(r(e,t),r(o,this),r(a,this))}<span class="cstat-no" title="statement not covered" ></span></span>t</span>his._state=!0,this._value=t,u.call(this)}</span>catch(n){<span class="cstat-no" title="statement not covered" >a.call(this,n)}</span>}</span>function <span class="fstat-no" title="function not covered" >a(</span>t){<span class="cstat-no" title="statement not covered" >this._state=!1,this._value=t,u.call(this)}</span>function <span class="fstat-no" title="function not covered" >u(</span>){<span class="cstat-no" title="statement not covered" >for(var t=0,e=this._deferreds.length;t&lt;e;t++)<span class="cstat-no" title="statement not covered" >i.call(this,this._deferreds[t]);<span class="cstat-no" title="statement not covered" >t</span></span>his._deferreds=null}</span>function <span class="fstat-no" title="function not covered" >c(</span>t,e,n,r){<span class="cstat-no" title="statement not covered" >this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}</span>function <span class="fstat-no" title="function not covered" >l(</span>t,e,n){var r=<span class="cstat-no" title="statement not covered" >!1;<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >t(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >r||(r=!0,e(t))}</span>,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >r||(r=!0,n(t))}</span>)}</span>catch(o){<span class="cstat-no" title="statement not covered" >if(r)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >r</span></span>=!0,n(o)}</span>}<span class="cstat-no" title="statement not covered" ></span>return t.prototype["catch"]=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.then(null,t)}</span>,t.prototype.then=<span class="fstat-no" title="function not covered" >fu</span>nction(n,r){var o=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>return new t(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >i.call(o,new c(n,r,t,e))}</span>)}</span>,t.all=<span class="fstat-no" title="function not covered" >fu</span>nction(){var c=<span class="cstat-no" title="statement not covered" >Array.prototype.slice.call(1===arguments.length&amp;&amp;n(arguments[0])?arguments[0]:arguments);<span class="cstat-no" title="statement not covered" ></span>return new t(<span class="fstat-no" title="function not covered" >fu</span>nction(o,i){<span class="cstat-no" title="statement not covered" >if(0===c.length)<span class="cstat-no" title="statement not covered" >return o([]);v</span></span>ar a=<span class="cstat-no" title="statement not covered" >c.length;</span>function <span class="fstat-no" title="function not covered" >u(</span>e,t){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >if(t&amp;&amp;("object"==typeof t||"function"==typeof t)){var n=<span class="cstat-no" title="statement not covered" >t.then;<span class="cstat-no" title="statement not covered" ></span>if("function"==typeof n)<span class="cstat-no" title="statement not covered" >return void n.call(t,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >u(e,t)}</span>,i)}<span class="cstat-no" title="statement not covered" ></span></span>c</span>[e]=t,0==--a&amp;&amp;o(c)}</span>catch(r){<span class="cstat-no" title="statement not covered" >i(r)}</span>}<span class="cstat-no" title="statement not covered" ></span>for(var t=0;t&lt;c.length;t++)<span class="cstat-no" title="statement not covered" >u(t,c[t])}</span></span>)}</span>,t.resolve=<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return e&amp;&amp;"object"==typeof e&amp;&amp;e.constructor===t?e:new t(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >t(e)}</span>)}</span>,t.reject=<span class="fstat-no" title="function not covered" >fu</span>nction(n){<span class="cstat-no" title="statement not covered" >return new t(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >e(n)}</span>)}</span>,t.race=<span class="fstat-no" title="function not covered" >fu</span>nction(o){<span class="cstat-no" title="statement not covered" >return new t(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >for(var n=0,r=o.length;n&lt;r;n++)<span class="cstat-no" title="statement not covered" >o[n].then(t,e)}</span></span>)}</span>,t}</span>(),</span>a=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return t}</span>}</span>;</span>function <span class="fstat-no" title="function not covered" >u(</span>r){<span class="cstat-no" title="statement not covered" >for(var o=[],t=1;t&lt;arguments.length;t++)<span class="cstat-no" title="statement not covered" >o[t-1]=arguments[t];<span class="cstat-no" title="statement not covered" >r</span></span>eturn <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >for(var t=[],e=0;e&lt;arguments.length;e++)<span class="cstat-no" title="statement not covered" >t[e]=arguments[e];v</span></span>ar n=<span class="cstat-no" title="statement not covered" >o.concat(t);<span class="cstat-no" title="statement not covered" ></span>return r.apply(null,n)}</span>}</span>var c,l,f,d,m=<span class="cstat-no" title="statement not covered" >a(!1),</span>y=<span class="cstat-no" title="statement not covered" >a(!0),</span>v=<span class="cstat-no" title="statement not covered" >m,</span>b=<span class="cstat-no" title="statement not covered" >y,</span>w=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return x}</span>,</span>x=(<span class="cstat-no" title="statement not covered" >d={fold:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return t()}</span>,is:v,isSome:v,isNone:b,getOr:f=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t}</span>,getOrThunk:l=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t()}</span>,getOrDie:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >throw new Error(t||"error: getOrDie called on none.")}</span>,getOrNull:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return null}</span>,getOrUndefined:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return undefined}</span>,or:f,orThunk:l,map:w,ap:w,each:<span class="fstat-no" title="function not covered" >fu</span>nction(){},bind:w,flatten:w,exists:v,forall:b,filter:w,equals:c=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.isNone()}</span>,equals_:c,toArray:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return[]}</span>,toString:a("none()")},Object.freeze&amp;&amp;Object.freeze(d),d)</span>,I=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(n){var t=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return n}</span>,</span>e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return o}</span>,</span>r=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t(n)}</span>,</span>o=<span class="cstat-no" title="statement not covered" >{fold:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return e(n)}</span>,is:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return n===t}</span>,isSome:b,isNone:v,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return I(t(n))}</span>,ap:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.fold(w,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return I(t(n))}</span>)}</span>,each:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >t(n)}</span>,bind:r,flatten:t,exists:r,forall:r,filter:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t(n)?o:x}</span>,equals:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.is(n)}</span>,equals_:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return t.fold(v,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e(n,t)}</span>)}</span>,toArray:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return[n]}</span>,toString:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return"some("+n+")"}</span>};<span class="cstat-no" title="statement not covered" ></span>return o}</span>,</span>T=<span class="cstat-no" title="statement not covered" >{some:I,none:w,from:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return null===t||t===undefined?x:I(t)}</span>},</span>R=<span class="cstat-no" title="statement not covered" >"undefined"!=typeof s.window?s.window:Function("return this;")(),</span>S=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >for(var n=e!==undefined&amp;&amp;null!==e?e:R,r=0;r&lt;t.length&amp;&amp;n!==undefined&amp;&amp;null!==n;++r)<span class="cstat-no" title="statement not covered" >n=n[t[r]];<span class="cstat-no" title="statement not covered" >r</span></span>eturn n}</span>(t.split("."),e)}</span>,</span>O=<span class="cstat-no" title="statement not covered" >{getOrDie:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n=<span class="cstat-no" title="statement not covered" >S(t,e);<span class="cstat-no" title="statement not covered" ></span>if(n===undefined||null===n)<span class="cstat-no" title="statement not covered" >throw t+" not available on this browser";<span class="cstat-no" title="statement not covered" >r</span></span>eturn n}</span>};</span>function <span class="fstat-no" title="function not covered" >F(</span>){<span class="cstat-no" title="statement not covered" >return new(O.getOrDie("FileReader"))}</span>var C=<span class="cstat-no" title="statement not covered" >{atob:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return O.getOrDie("atob")(t)}</span>,requestAnimationFrame:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >O.getOrDie("requestAnimationFrame")(t)}</span>};</span>function <span class="fstat-no" title="function not covered" >E(</span>u){<span class="cstat-no" title="statement not covered" >return new g(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n=<span class="cstat-no" title="statement not covered" >s.URL.createObjectURL(u),</span>r=<span class="cstat-no" title="statement not covered" >new s.Image,</span>o=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >r.removeEventListener("load",i),r.removeEventListener("error",a)}</span>;</span>function <span class="fstat-no" title="function not covered" >i(</span>){<span class="cstat-no" title="statement not covered" >o(),t(r)}</span>function <span class="fstat-no" title="function not covered" >a(</span>){<span class="cstat-no" title="statement not covered" >o(),e("Unable to load data of type "+u.type+": "+n)}<span class="cstat-no" title="statement not covered" ></span>r.addEventListener("load",i),r.addEventListener("error",a),r.src=n,r.complete&amp;&amp;i()}</span>)}</span>function <span class="fstat-no" title="function not covered" >D(</span>r){<span class="cstat-no" title="statement not covered" >return new g(<span class="fstat-no" title="function not covered" >fu</span>nction(t,n){var e=<span class="cstat-no" title="statement not covered" >new s.XMLHttpRequest;<span class="cstat-no" title="statement not covered" ></span>e.open("GET",r,!0),e.responseType="blob",e.onload=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >200==this.status&amp;&amp;t(this.response)}</span>,e.onerror=<span class="fstat-no" title="function not covered" >fu</span>nction(){var t,e=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>n(0===this.status?((t=new Error("No access to download image")).code=18,t.name="SecurityError",t):new Error("Error "+e.status+" downloading image"))}</span>,e.send()}</span>)}</span>function <span class="fstat-no" title="function not covered" >A(</span>t){var e=<span class="cstat-no" title="statement not covered" >t.split(","),</span>n=<span class="cstat-no" title="statement not covered" >/data:([^;]+)/.exec(e[0]);<span class="cstat-no" title="statement not covered" ></span>if(!n)<span class="cstat-no" title="statement not covered" >return T.none();<span class="cstat-no" title="statement not covered" >f</span></span>or(var r,o,i,a=n[1],u=e[1],c=C.atob(u),l=c.length,s=Math.ceil(l/1024),f=new Array(s),d=0;d&lt;s;++d){<span class="cstat-no" title="statement not covered" >for(var h=1024*d,p=Math.min(h+1024,l),g=new Array(p-h),m=h,y=0;m&lt;p;++y,++m)<span class="cstat-no" title="statement not covered" >g[y]=c[m].charCodeAt(0);<span class="cstat-no" title="statement not covered" >f</span></span>[d]=(r=g,new(O.getOrDie("Uint8Array"))(r))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn T.some((o=f,i={type:a},new(O.getOrDie("Blob"))(o,i)))}</span>function <span class="fstat-no" title="function not covered" >_(</span>n){<span class="cstat-no" title="statement not covered" >return new g(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >A(n).fold(<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >e("uri is not base64: "+n)}</span>,t)}</span>)}</span>function <span class="fstat-no" title="function not covered" >k(</span>n){<span class="cstat-no" title="statement not covered" >return new g(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >F();<span class="cstat-no" title="statement not covered" ></span>e.onloadend=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >t(e.result)}</span>,e.readAsDataURL(n)}</span>)}</span>var L=<span class="cstat-no" title="statement not covered" >{blobToImage:E,imageToBlob:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >t.src;<span class="cstat-no" title="statement not covered" ></span>return 0===e.indexOf("data:")?_(e):D(e)}</span>,blobToArrayBuffer:<span class="fstat-no" title="function not covered" >fu</span>nction(n){<span class="cstat-no" title="statement not covered" >return new g(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >F();<span class="cstat-no" title="statement not covered" ></span>e.onloadend=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >t(e.result)}</span>,e.readAsArrayBuffer(n)}</span>)}</span>,blobToDataUri:k,blobToBase64:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return k(t).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.split(",")[1]}</span>)}</span>,dataUriToBlobSync:A,canvasToBlob:<span class="fstat-no" title="function not covered" >fu</span>nction(t,n,r){<span class="cstat-no" title="statement not covered" >return n=n||"image/png",s.HTMLCanvasElement.prototype.toBlob?new g(<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >t.toBlob(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >e(t)}</span>,n,r)}</span>):_(t.toDataURL(n,r))}</span>,canvasToDataURL:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >return e=e||"image/png",t.then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.toDataURL(e,n)}</span>)}</span>,blobToCanvas:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return E(t).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e,n;<span class="cstat-no" title="statement not covered" >return e=t,s.URL.revokeObjectURL(e.src),n=h.create(p.getWidth(t),p.getHeight(t)),h.get2dContext(n).drawImage(t,0,0),n}</span>)}</span>,uriToBlob:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return 0===t.indexOf("blob:")?D(t):0===t.indexOf("data:")?_(t):null}</span>},</span>P=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return L.blobToImage(t)}</span>,</span>B=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return L.imageToBlob(t)}</span>;</span>function <span class="fstat-no" title="function not covered" >H(</span>t,e,n){var r=<span class="cstat-no" title="statement not covered" >e.type;</span>function <span class="fstat-no" title="function not covered" >o(</span>e,n){<span class="cstat-no" title="statement not covered" >return t.then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return L.canvasToDataURL(t,e,n)}</span>)}<span class="cstat-no" title="statement not covered" ></span>return{getType:a(r),toBlob:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return g.resolve(e)}</span>,toDataURL:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return n}</span>,toBase64:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return n.split(",")[1]}</span>,toAdjustedBlob:<span class="fstat-no" title="function not covered" >fu</span>nction(e,n){<span class="cstat-no" title="statement not covered" >return t.then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return L.canvasToBlob(t,e,n)}</span>)}</span>,toAdjustedDataURL:o,toAdjustedBase64:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return o(t,e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.split(",")[1]}</span>)}</span>,toCanvas:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return t.then(h.clone)}</span>}}</span>function <span class="fstat-no" title="function not covered" >M(</span>e){<span class="cstat-no" title="statement not covered" >return L.blobToDataUri(e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return H(L.blobToCanvas(e),e,t)}</span>)}</span>var N=<span class="cstat-no" title="statement not covered" >{fromBlob:M,fromCanvas:<span class="fstat-no" title="function not covered" >fu</span>nction(e,t){<span class="cstat-no" title="statement not covered" >return L.canvasToBlob(e,t).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return H(g.resolve(e),t,e.toDataURL())}</span>)}</span>,fromImage:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return L.imageToBlob(t).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return M(t)}</span>)}</span>,fromBlobAndUrlSync:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return H(L.blobToCanvas(t),t,e)}</span>};</span>function <span class="fstat-no" title="function not covered" >U(</span>t,e,n){<span class="cstat-no" title="statement not covered" >return n&lt;(t=parseFloat(t))?t=n:t&lt;e&amp;&amp;(t=e),t}</span>var j=<span class="cstat-no" title="statement not covered" >[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];</span>function <span class="fstat-no" title="function not covered" >G(</span>t,e){var n,r,o,i,a=<span class="cstat-no" title="statement not covered" >[],</span>u=<span class="cstat-no" title="statement not covered" >new Array(10);<span class="cstat-no" title="statement not covered" ></span>for(n=0;n&lt;5;n++){<span class="cstat-no" title="statement not covered" >for(r=0;r&lt;5;r++)<span class="cstat-no" title="statement not covered" >a[r]=e[r+5*n];<span class="cstat-no" title="statement not covered" >f</span></span>or(r=0;r&lt;5;r++){<span class="cstat-no" title="statement not covered" >for(o=i=0;o&lt;5;o++)<span class="cstat-no" title="statement not covered" >i+=t[r+5*o]*a[o];<span class="cstat-no" title="statement not covered" >u</span></span>[r+5*n]=i}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn u}</span>function <span class="fstat-no" title="function not covered" >z(</span>t,n){<span class="cstat-no" title="statement not covered" >return n=U(n,0,1),t.map(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return e%6==0?t=1-(1-t)*n:t*=n,U(t,0,1)}</span>)}</span>var V=<span class="cstat-no" title="statement not covered" >{identity:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}</span>,adjust:z,multiply:G,adjustContrast:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n;<span class="cstat-no" title="statement not covered" >return e=U(e,-1,1),G(t,[(n=(e*=100)&lt;0?127+e/100*127:127*(n=0==(n=e%1)?j[e]:j[Math.floor(e)]*(1-n)+j[Math.floor(e)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])}</span>,adjustBrightness:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return G(t,[1,0,0,0,e=U(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])}</span>,adjustSaturation:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n;<span class="cstat-no" title="statement not covered" >return G(t,[.3086*(1-(n=1+(0&lt;(e=U(e,-1,1))?3*e:e)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])}</span>,adjustHue:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r,o,i,a;<span class="cstat-no" title="statement not covered" >return e=U(e,-180,180)/180*Math.PI,G(t,[(o=.213)+.787*(n=Math.cos(e))+(r=Math.sin(e))*-o,(i=.715)+n*-i+r*-i,(a=.072)+n*-a+.928*r,0,0,o+n*-o+.143*r,i+n*(1-i)+.14*r,a+n*-a+-.283*r,0,0,o+n*-o+-.787*r,i+n*-i+r*i,a+.928*n+r*a,0,0,0,0,0,1,0,0,0,0,0,1])}</span>,adjustColors:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n,r){<span class="cstat-no" title="statement not covered" >return G(t,[e=U(e,0,2),0,0,0,0,0,n=U(n,0,2),0,0,0,0,0,r=U(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])}</span>,adjustSepia:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return G(t,z([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],e=U(e,0,1)))}</span>,adjustGrayscale:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return G(t,z([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],e=U(e,0,1)))}</span>};</span>function <span class="fstat-no" title="function not covered" >W(</span>a,u){<span class="cstat-no" title="statement not covered" >return a.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e=t,n=a.getType(),r=u,i=h.get2dContext(e),o=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r,o,i,a,u=<span class="cstat-no" title="statement not covered" >t.data,</span>c=<span class="cstat-no" title="statement not covered" >e[0],</span>l=<span class="cstat-no" title="statement not covered" >e[1],</span>s=<span class="cstat-no" title="statement not covered" >e[2],</span>f=<span class="cstat-no" title="statement not covered" >e[3],</span>d=<span class="cstat-no" title="statement not covered" >e[4],</span>h=<span class="cstat-no" title="statement not covered" >e[5],</span>p=<span class="cstat-no" title="statement not covered" >e[6],</span>g=<span class="cstat-no" title="statement not covered" >e[7],</span>m=<span class="cstat-no" title="statement not covered" >e[8],</span>y=<span class="cstat-no" title="statement not covered" >e[9],</span>v=<span class="cstat-no" title="statement not covered" >e[10],</span>b=<span class="cstat-no" title="statement not covered" >e[11],</span>w=<span class="cstat-no" title="statement not covered" >e[12],</span>x=<span class="cstat-no" title="statement not covered" >e[13],</span>I=<span class="cstat-no" title="statement not covered" >e[14],</span>T=<span class="cstat-no" title="statement not covered" >e[15],</span>R=<span class="cstat-no" title="statement not covered" >e[16],</span>S=<span class="cstat-no" title="statement not covered" >e[17],</span>O=<span class="cstat-no" title="statement not covered" >e[18],</span>F=<span class="cstat-no" title="statement not covered" >e[19];<span class="cstat-no" title="statement not covered" ></span>for(a=0;a&lt;u.length;a+=4)<span class="cstat-no" title="statement not covered" >n=u[a],r=u[a+1],o=u[a+2],i=u[a+3],u[a]=n*c+r*l+o*s+i*f+d,u[a+1]=n*h+r*p+o*g+i*m+y,u[a+2]=n*v+r*b+o*w+i*x+I,u[a+3]=n*T+r*R+o*S+i*O+F;<span class="cstat-no" title="statement not covered" >r</span></span>eturn t}</span>(i.getImageData(0,0,e.width,e.height),r),i.putImageData(o,0,0),N.fromCanvas(e,n);v</span>ar e,n,r,o,i})}</span>function <span class="fstat-no" title="function not covered" >q(</span>u,c){<span class="cstat-no" title="statement not covered" >return u.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e=t,n=u.getType(),r=c,a=h.get2dContext(e),o=a.getImageData(0,0,e.width,e.height),i=a.getImageData(0,0,e.width,e.height),i=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){var r,o,i,a,u,c,l,s,f,d,h,p,g,m,y,v,b;function <span class="fstat-no" title="function not covered" >w(</span>t,e,n){<span class="cstat-no" title="statement not covered" >return n&lt;t?t=n:t&lt;e&amp;&amp;(t=e),t}<span class="cstat-no" title="statement not covered" ></span>for(i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),r=t.data,o=e.data,v=t.width,b=t.height,c=0;c&lt;b;c++)<span class="cstat-no" title="statement not covered" >for(u=0;u&lt;v;u++){<span class="cstat-no" title="statement not covered" >for(l=s=f=0,h=0;h&lt;i;h++)<span class="cstat-no" title="statement not covered" >for(d=0;d&lt;i;d++)<span class="cstat-no" title="statement not covered" >p=w(u+d-a,0,v-1),g=w(c+h-a,0,b-1),m=4*(g*v+p),y=n[h*i+d],l+=r[m]*y,s+=r[m+1]*y,f+=r[m+2]*y;<span class="cstat-no" title="statement not covered" >o</span></span></span>[m=4*(c*v+u)]=w(l,0,255),o[m+1]=w(s,0,255),o[m+2]=w(f,0,255)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn e}</span>(o,i,r),a.putImageData(i,0,0),N.fromCanvas(e,n);v</span>ar e,n,r,o,i,a})}</span>function <span class="fstat-no" title="function not covered" >Y(</span>u){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(e,n){<span class="cstat-no" title="statement not covered" >return e.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){var r,o,i=<span class="cstat-no" title="statement not covered" >h.get2dContext(t),</span>a=<span class="cstat-no" title="statement not covered" >new Array(256);<span class="cstat-no" title="statement not covered" ></span>for(o=0;o&lt;a.length;o++)<span class="cstat-no" title="statement not covered" >a[o]=u(o,n);<span class="cstat-no" title="statement not covered" >r</span></span>eturn r=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r=<span class="cstat-no" title="statement not covered" >t.data;<span class="cstat-no" title="statement not covered" ></span>for(n=0;n&lt;r.length;n+=4)<span class="cstat-no" title="statement not covered" >r[n]=e[r[n]],r[n+1]=e[r[n+1]],r[n+2]=e[r[n+2]];<span class="cstat-no" title="statement not covered" >r</span></span>eturn t}</span>(i.getImageData(0,0,t.width,t.height),a),i.putImageData(r,0,0),N.fromCanvas(t,e)}</span>(t,e.getType(),n)}</span>)}</span>}</span>function <span class="fstat-no" title="function not covered" >X(</span>n){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return W(t,n(V.identity(),e))}</span>}</span>function <span class="fstat-no" title="function not covered" >J(</span>e){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return q(t,e)}</span>}</span>var K,Z=<span class="cstat-no" title="statement not covered" >{invert:(K=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0],<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return W(t,K)}</span>),brightness:X(V.adjustBrightness),hue:X(V.adjustHue),saturate:X(V.adjustSaturation),contrast:X(V.adjustContrast),grayscale:X(V.adjustGrayscale),sepia:X(V.adjustSepia),colorize:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n,r){<span class="cstat-no" title="statement not covered" >return W(t,V.adjustColors(V.identity(),e,n,r))}</span>,sharpen:J([0,-1,0,-1,5,-1,0,-1,0]),emboss:J([-2,-1,0,-1,1,1,0,1,2]),gamma:Y(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return 255*Math.pow(t/255,1-e)}</span>),exposure:Y(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return 255*(1-Math.exp(-t/255*e))}</span>),colorFilter:W,convoluteFilter:q},</span>Q=<span class="cstat-no" title="statement not covered" >{scale:function <span class="fstat-no" title="function not covered" >e(</span>t,n,r){var o=<span class="cstat-no" title="statement not covered" >p.getWidth(t),</span>i=<span class="cstat-no" title="statement not covered" >p.getHeight(t),</span>a=<span class="cstat-no" title="statement not covered" >n/o,</span>u=<span class="cstat-no" title="statement not covered" >r/i,</span>c=<span class="cstat-no" title="statement not covered" >!1;<span class="cstat-no" title="statement not covered" ></span>(a&lt;.5||2&lt;a)&amp;&amp;(a=a&lt;.5?.5:2,c=!0),(u&lt;.5||2&lt;u)&amp;&amp;(u=u&lt;.5?.5:2,c=!0);v</span>ar l,s,f,d=(<span class="cstat-no" title="statement not covered" >l=t,s=a,f=u,new g(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >p.getWidth(l),</span>n=<span class="cstat-no" title="statement not covered" >p.getHeight(l),</span>r=<span class="cstat-no" title="statement not covered" >Math.floor(e*s),</span>o=<span class="cstat-no" title="statement not covered" >Math.floor(n*f),</span>i=<span class="cstat-no" title="statement not covered" >h.create(r,o),</span>a=<span class="cstat-no" title="statement not covered" >h.get2dContext(i);<span class="cstat-no" title="statement not covered" ></span>a.drawImage(l,0,0,e,n,0,0,r,o),t(i)}</span>))</span>;<span class="cstat-no" title="statement not covered" >return c?d.then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e(t,n,r)}</span>):d}</span>},</span>tt=<span class="cstat-no" title="statement not covered" >{rotate:<span class="fstat-no" title="function not covered" >fu</span>nction(c,l){<span class="cstat-no" title="statement not covered" >return c.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e=t,n=c.getType(),r=l,o=h.create(e.width,e.height),i=h.get2dContext(o),90!=(r=r&lt;(u=a=0)?360+r:r)&amp;&amp;270!=r||h.resize(o,o.height,o.width),90!=r&amp;&amp;180!=r||(a=o.width),270!=r&amp;&amp;180!=r||(u=o.height),i.translate(a,u),i.rotate(r*Math.PI/180),i.drawImage(e,0,0),N.fromCanvas(o,n);v</span>ar e,n,r,o,i,a,u})}</span>,flip:<span class="fstat-no" title="function not covered" >fu</span>nction(a,u){<span class="cstat-no" title="statement not covered" >return a.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e=t,n=a.getType(),r=u,o=h.create(e.width,e.height),i=h.get2dContext(o),"v"==r?(i.scale(1,-1),i.drawImage(e,0,-o.height)):(i.scale(-1,1),i.drawImage(e,-o.width,0)),N.fromCanvas(o,n);v</span>ar e,n,r,o,i})}</span>,crop:<span class="fstat-no" title="function not covered" >fu</span>nction(c,l,s,f,d){<span class="cstat-no" title="statement not covered" >return c.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e=t,n=c.getType(),r=l,o=s,i=f,a=d,u=h.create(i,a),h.get2dContext(u).drawImage(e,-r,-o),N.fromCanvas(u,n);v</span>ar e,n,r,o,i,a,u})}</span>,resize:<span class="fstat-no" title="function not covered" >fu</span>nction(e,n,r){<span class="cstat-no" title="statement not covered" >return e.toCanvas().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return Q.scale(t,n,r).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return N.fromCanvas(t,e.getType())}</span>)}</span>)}</span>},</span>et=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >t(</span>t){<span class="cstat-no" title="statement not covered" >this.littleEndian=!1,this._dv=new DataView(t)}<span class="cstat-no" title="statement not covered" ></span>return t.prototype.readByteAt=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this._dv.getUint8(t)}</span>,t.prototype.read=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >if(t+e&gt;this.length())<span class="cstat-no" title="statement not covered" >return null;<span class="cstat-no" title="statement not covered" >f</span></span>or(var n=this.littleEndian?0:-8*(e-1),r=0,o=0;r&lt;e;r++)<span class="cstat-no" title="statement not covered" >o|=this.readByteAt(t+r)&lt;&lt;Math.abs(n+8*r);<span class="cstat-no" title="statement not covered" >r</span></span>eturn o}</span>,t.prototype.BYTE=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.read(t,1)}</span>,t.prototype.SHORT=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.read(t,2)}</span>,t.prototype.LONG=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.read(t,4)}</span>,t.prototype.SLONG=<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >this.read(t,4);<span class="cstat-no" title="statement not covered" ></span>return 2147483647&lt;e?e-4294967296:e}</span>,t.prototype.CHAR=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return String.fromCharCode(this.read(t,1))}</span>,t.prototype.STRING=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return this.asArray("CHAR",t,e).join("")}</span>,t.prototype.SEGMENT=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n=<span class="cstat-no" title="statement not covered" >this._dv.buffer;<span class="cstat-no" title="statement not covered" ></span>switch(arguments.length){case 2:<span class="cstat-no" title="statement not covered" >return n.slice(t,t+e);c</span>ase 1:<span class="cstat-no" title="statement not covered" >return n.slice(t);d</span>efault:<span class="cstat-no" title="statement not covered" >return n}</span>}</span>,t.prototype.asArray=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >for(var r=[],o=0;o&lt;n;o++)<span class="cstat-no" title="statement not covered" >r[o]=this[t](e+o);<span class="cstat-no" title="statement not covered" >r</span></span>eturn r}</span>,t.prototype.length=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return this._dv?this._dv.byteLength:0}</span>,t}</span>(),</span>nt=<span class="cstat-no" title="statement not covered" >{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},</span>rt=<span class="cstat-no" title="statement not covered" >{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},</span>ot=<span class="cstat-no" title="statement not covered" >{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},</span>it=<span class="cstat-no" title="statement not covered" >{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"},</span>at=<span class="cstat-no" title="statement not covered" >{ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},</span>ut=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){function <span class="fstat-no" title="function not covered" >t(</span>t){<span class="cstat-no" title="statement not covered" >this._offsets={tiffHeader:10,IFD0:null,IFD1:null,exifIFD:null,gpsIFD:null},this._tiffTags={};v</span>ar e=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>if(e._reader=new et(t),e._idx=e._offsets.tiffHeader,65505!==e.SHORT(0)||"EXIF\0"!==e.STRING(4,5).toUpperCase())<span class="cstat-no" title="statement not covered" >throw new Error("Exif data cannot be read or not available.");<span class="cstat-no" title="statement not covered" >i</span></span>f(e._reader.littleEndian=18761==e.SHORT(e._idx),42!==e.SHORT(e._idx+=2))<span class="cstat-no" title="statement not covered" >throw new Error("Invalid Exif data.");<span class="cstat-no" title="statement not covered" >e</span></span>._offsets.IFD0=e._offsets.tiffHeader+e.LONG(e._idx+=2),e._tiffTags=e.extractTags(e._offsets.IFD0,nt),"ExifIFDPointer"in e._tiffTags&amp;&amp;(e._offsets.exifIFD=e._offsets.tiffHeader+e._tiffTags.ExifIFDPointer,delete e._tiffTags.ExifIFDPointer),"GPSInfoIFDPointer"in e._tiffTags&amp;&amp;(e._offsets.gpsIFD=e._offsets.tiffHeader+e._tiffTags.GPSInfoIFDPointer,delete e._tiffTags.GPSInfoIFDPointer);v</span>ar n=<span class="cstat-no" title="statement not covered" >e.LONG(e._offsets.IFD0+12*e.SHORT(e._offsets.IFD0)+2);<span class="cstat-no" title="statement not covered" ></span>n&amp;&amp;(e._offsets.IFD1=e._offsets.tiffHeader+n)}<span class="cstat-no" title="statement not covered" ></span>return t.prototype.BYTE=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this._reader.BYTE(t)}</span>,t.prototype.SHORT=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this._reader.SHORT(t)}</span>,t.prototype.LONG=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this._reader.LONG(t)}</span>,t.prototype.SLONG=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this._reader.SLONG(t)}</span>,t.prototype.CHAR=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this._reader.CHAR(t)}</span>,t.prototype.STRING=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return this._reader.STRING(t,e)}</span>,t.prototype.SEGMENT=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return this._reader.SEGMENT(t,e)}</span>,t.prototype.asArray=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >for(var r=[],o=0;o&lt;n;o++)<span class="cstat-no" title="statement not covered" >r[o]=this[t](e+o);<span class="cstat-no" title="statement not covered" >r</span></span>eturn r}</span>,t.prototype.length=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return this._reader.length()}</span>,t.prototype.UNDEFINED=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return this.BYTE.apply(this,arguments)}</span>,t.prototype.RATIONAL=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.LONG(t)/this.LONG(t+4)}</span>,t.prototype.SRATIONAL=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.SLONG(t)/this.SLONG(t+4)}</span>,t.prototype.ASCII=<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return this.CHAR(t)}</span>,t.prototype.TIFF=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return this._tiffTags}</span>,t.prototype.EXIF=<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >null;<span class="cstat-no" title="statement not covered" ></span>if(this._offsets.exifIFD){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >t=this.extractTags(this._offsets.exifIFD,rt)}</span>catch(r){<span class="cstat-no" title="statement not covered" >return null}<span class="cstat-no" title="statement not covered" ></span>i</span>f(t.ExifVersion&amp;&amp;Array.isArray(t.ExifVersion)){<span class="cstat-no" title="statement not covered" >for(var e=0,n="";e&lt;t.ExifVersion.length;e++)<span class="cstat-no" title="statement not covered" >n+=String.fromCharCode(t.ExifVersion[e]);<span class="cstat-no" title="statement not covered" >t</span></span>.ExifVersion=n}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>,t.prototype.GPS=<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >null;<span class="cstat-no" title="statement not covered" ></span>if(this._offsets.gpsIFD){<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >t=this.extractTags(this._offsets.gpsIFD,ot)}</span>catch(e){<span class="cstat-no" title="statement not covered" >return null}<span class="cstat-no" title="statement not covered" ></span>t</span>.GPSVersionID&amp;&amp;Array.isArray(t.GPSVersionID)&amp;&amp;(t.GPSVersionID=t.GPSVersionID.join("."))}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn t}</span>,t.prototype.thumb=<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >this;<span class="cstat-no" title="statement not covered" ></span>if(t._offsets.IFD1)<span class="cstat-no" title="statement not covered" >try{var e=<span class="cstat-no" title="statement not covered" >t.extractTags(t._offsets.IFD1,it);<span class="cstat-no" title="statement not covered" ></span>if("JPEGInterchangeFormat"in e)<span class="cstat-no" title="statement not covered" >return t.SEGMENT(t._offsets.tiffHeader+e.JPEGInterchangeFormat,e.JPEGInterchangeFormatLength)}</span></span>catch(n){}<span class="cstat-no" title="statement not covered" >r</span></span>eturn null}</span>,t.prototype.extractTags=<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r,o,i,a,u,c,l,s=<span class="cstat-no" title="statement not covered" >this,</span>f=<span class="cstat-no" title="statement not covered" >[],</span>d=<span class="cstat-no" title="statement not covered" >{},</span>h=<span class="cstat-no" title="statement not covered" >{1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},</span>p=<span class="cstat-no" title="statement not covered" >{BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};<span class="cstat-no" title="statement not covered" ></span>for(n=s.SHORT(t),r=0;r&lt;n;r++)<span class="cstat-no" title="statement not covered" >if(f=[],c=t+2+12*r,(o=e[s.SHORT(c)])!==undefined){<span class="cstat-no" title="statement not covered" >if(i=h[s.SHORT(c+=2)],a=s.LONG(c+=2),!(u=p[i]))<span class="cstat-no" title="statement not covered" >throw new Error("Invalid Exif data.");<span class="cstat-no" title="statement not covered" >i</span></span>f(c+=4,4&lt;u*a&amp;&amp;(c=s.LONG(c)+s._offsets.tiffHeader),c+u*a&gt;=s.length())<span class="cstat-no" title="statement not covered" >throw new Error("Invalid Exif data.");<span class="cstat-no" title="statement not covered" >"</span></span>ASCII"!==i?(f=s.asArray(i,c,a),l=1==a?f[0]:f,at.hasOwnProperty(o)&amp;&amp;"object"!=typeof l?d[o]=at[o][l]:d[o]=l):d[o]=s.STRING(c,a).replace(/\0$/,"").trim()}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn d}</span>,t}</span>(),</span>ct=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){var e,n,r=<span class="cstat-no" title="statement not covered" >[],</span>o=<span class="cstat-no" title="statement not covered" >0;<span class="cstat-no" title="statement not covered" ></span>for(e=2;e&lt;=t.length();)<span class="cstat-no" title="statement not covered" >if(65488&lt;=(n=t.SHORT(e))&amp;&amp;n&lt;=65495)<span class="cstat-no" title="statement not covered" >e+=2;e</span>lse{<span class="cstat-no" title="statement not covered" >if(65498===n||65497===n)<span class="cstat-no" title="statement not covered" >break;<span class="cstat-no" title="statement not covered" >o</span></span>=t.SHORT(e+2)+2,65505&lt;=n&amp;&amp;n&lt;=65519&amp;&amp;r.push({hex:n,name:"APP"+(15&amp;n),start:e,length:o,segment:t.SEGMENT(e,o)}),e+=o}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn r}</span>,</span>lt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(u){<span class="cstat-no" title="statement not covered" >return L.blobToArrayBuffer(u).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >try{var e=<span class="cstat-no" title="statement not covered" >new et(t);<span class="cstat-no" title="statement not covered" ></span>if(65496===e.SHORT(0)){var n=<span class="cstat-no" title="statement not covered" >ct(e),</span>r=<span class="cstat-no" title="statement not covered" >n.filter(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return"APP1"===t.name}</span>),</span>o=<span class="cstat-no" title="statement not covered" >{};<span class="cstat-no" title="statement not covered" ></span>if(!r.length)<span class="cstat-no" title="statement not covered" >return g.reject("Headers did not include required information");v</span></span>ar i=<span class="cstat-no" title="statement not covered" >new ut(r[0].segment);<span class="cstat-no" title="statement not covered" ></span>return(o={tiff:i.TIFF(),exif:i.EXIF(),gps:i.GPS(),thumb:i.thumb()}).rawHeaders=n,o}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn g.reject("Image was not a jpeg")}</span>catch(a){<span class="cstat-no" title="statement not covered" >return g.reject("Unsupported format or not an image: "+u.type+" (Exception: "+a.message+")")}</span>}</span>)}</span>,</span>st=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return tt.rotate(t,e)}</span>,</span>ft=<span class="cstat-no" title="statement not covered" >{invert:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return Z.invert(t)}</span>,sharpen:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return Z.sharpen(t)}</span>,emboss:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return Z.emboss(t)}</span>,brightness:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.brightness(t,e)}</span>,hue:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.hue(t,e)}</span>,saturate:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.saturate(t,e)}</span>,contrast:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.contrast(t,e)}</span>,grayscale:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.grayscale(t,e)}</span>,sepia:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.sepia(t,e)}</span>,colorize:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n,r){<span class="cstat-no" title="statement not covered" >return Z.colorize(t,e,n,r)}</span>,gamma:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.gamma(t,e)}</span>,exposure:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Z.exposure(t,e)}</span>,flip:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return tt.flip(t,e)}</span>,crop:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n,r,o){<span class="cstat-no" title="statement not covered" >return tt.crop(t,e,n,r,o)}</span>,resize:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >return tt.resize(t,e,n)}</span>,rotate:st,exifRotate:<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return e.toBlob().then(lt).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >switch(t.tiff.Orientation){case 6:<span class="cstat-no" title="statement not covered" >return st(e,90);c</span>ase 3:<span class="cstat-no" title="statement not covered" >return st(e,180);c</span>ase 8:<span class="cstat-no" title="statement not covered" >return st(e,270);d</span>efault:<span class="cstat-no" title="statement not covered" >return e}</span>}</span>,<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return e}</span>)}</span>},</span>dt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.toBlob()}</span>,</span>ht=<span class="cstat-no" title="statement not covered" >{blobToImageResult:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return N.fromBlob(t)}</span>,fromBlobAndUrlSync:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return N.fromBlobAndUrlSync(t,e)}</span>,imageToImageResult:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return N.fromImage(t)}</span>,imageResultToBlob:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >return e===undefined&amp;&amp;n===undefined?dt(t):t.toAdjustedBlob(e,n)}</span>,imageResultToOriginalBlob:dt,imageResultToDataURL:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.toDataURL()}</span>},</span>pt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return O.getOrDie("URL")}</span>,</span>gt=<span class="cstat-no" title="statement not covered" >{createObjectURL:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return pt().createObjectURL(t)}</span>,revokeObjectURL:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >pt().revokeObjectURL(t)}</span>},</span>mt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.Delay"),</span>yt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.Promise"),</span>vt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.URI"),</span>bt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),</span>wt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.ui.Factory"),</span>xt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.geom.Rect"),</span>It=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(n){<span class="cstat-no" title="statement not covered" >return new yt(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >n.removeEventListener("load",e),t(n)}</span>;<span class="cstat-no" title="statement not covered" ></span>n.complete?t(n):n.addEventListener("load",e)}</span>)}</span>,</span>Tt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),</span>Rt=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.Observable"),</span>St=<span class="cstat-no" title="statement not covered" >tinymce.util.Tools.resolve("tinymce.util.VK"),</span>Ot=<span class="cstat-no" title="statement not covered" >0,</span>Ft=<span class="cstat-no" title="statement not covered" >{create:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return new(wt.get("Control").extend({Defaults:{classes:"imagepanel"},selection:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return arguments.length?(this.state.set("rect",t),this):this.state.get("rect")}</span>,imageSize:<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >this.state.get("viewRect");<span class="cstat-no" title="statement not covered" ></span>return{w:t.w,h:t.h}}</span>,toggleCropRect:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >this.state.set("cropEnabled",t)}</span>,imageSrc:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var o=<span class="cstat-no" title="statement not covered" >this,</span>i=<span class="cstat-no" title="statement not covered" >new s.Image;<span class="cstat-no" title="statement not covered" ></span>i.src=t,It(i).then(<span class="fstat-no" title="function not covered" >fu</span>nction(){var t,e,n=<span class="cstat-no" title="statement not covered" >o.state.get("viewRect");<span class="cstat-no" title="statement not covered" ></span>if((e=o.$el.find("img"))[0])<span class="cstat-no" title="statement not covered" >e.replaceWith(i);e</span>lse{var r=<span class="cstat-no" title="statement not covered" >s.document.createElement("div");<span class="cstat-no" title="statement not covered" ></span>r.className="mce-imagepanel-bg",o.getEl().appendChild(r),o.getEl().appendChild(i)}<span class="cstat-no" title="statement not covered" ></span>t</span>={x:0,y:0,w:i.naturalWidth,h:i.naturalHeight},o.state.set("viewRect",t),o.state.set("rect",xt.inflate(t,-20,-20)),n&amp;&amp;n.w===t.w&amp;&amp;n.h===t.h||o.zoomFit(),o.repaintImage(),o.fire("load")}</span>)}</span>,zoom:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return arguments.length?(this.state.set("zoom",t),this):this.state.get("zoom")}</span>,postRender:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return this.imageSrc(this.settings.imageSrc),this._super()}</span>,zoomFit:<span class="fstat-no" title="function not covered" >fu</span>nction(){var t,e,n,r,o,i;<span class="cstat-no" title="statement not covered" >t=this.$el.find("img"),e=this.getEl().clientWidth,n=this.getEl().clientHeight,r=t[0].naturalWidth,o=t[0].naturalHeight,1&lt;=(i=Math.min((e-10)/r,(n-10)/o))&amp;&amp;(i=1),this.zoom(i)}</span>,repaintImage:<span class="fstat-no" title="function not covered" >fu</span>nction(){var t,e,n,r,o,i,a,u,c,l,s;<span class="cstat-no" title="statement not covered" >s=this.getEl(),c=this.zoom(),l=this.state.get("rect"),a=this.$el.find("img"),u=this.$el.find(".mce-imagepanel-bg"),o=s.offsetWidth,i=s.offsetHeight,n=a[0].naturalWidth*c,r=a[0].naturalHeight*c,t=Math.max(0,o/2-n/2),e=Math.max(0,i/2-r/2),a.css({left:t,top:e,width:n,height:r}),u.css({left:t,top:e,width:n,height:r}),this.cropRect&amp;&amp;(this.cropRect.setRect({x:l.x*c+t,y:l.y*c+e,w:l.w*c,h:l.h*c}),this.cropRect.setClampRect({x:t,y:e,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))}</span>,bindStates:<span class="fstat-no" title="function not covered" >fu</span>nction(){var r=<span class="cstat-no" title="statement not covered" >this;</span>function <span class="fstat-no" title="function not covered" >n(</span>t){<span class="cstat-no" title="statement not covered" >r.cropRect=<span class="fstat-no" title="function not covered" >fu</span>nction(l,n,s,r,o){var f,a,t,i,e=<span class="cstat-no" title="statement not covered" >"mce-",</span>u=<span class="cstat-no" title="statement not covered" >e+"crid-"+Ot++;</span>function <span class="fstat-no" title="function not covered" >d(</span>t,e){<span class="cstat-no" title="statement not covered" >return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}}</span>function <span class="fstat-no" title="function not covered" >c(</span>t,e,n,r){var o,i,a,u,c;<span class="cstat-no" title="statement not covered" >o=e.x,i=e.y,a=e.w,u=e.h,o+=n*t.deltaX,i+=r*t.deltaY,(a+=n*t.deltaW)&lt;20&amp;&amp;(a=20),(u+=r*t.deltaH)&lt;20&amp;&amp;(u=20),c=l=xt.clamp({x:o,y:i,w:a,h:u},s,"move"===t.name),c=d(s,c),f.fire("updateRect",{rect:c}),g(c)}</span>function <span class="fstat-no" title="function not covered" >h(</span>e){function <span class="fstat-no" title="function not covered" >t(</span>t,e){<span class="cstat-no" title="statement not covered" >e.h&lt;0&amp;&amp;(e.h=0),e.w&lt;0&amp;&amp;(e.w=0),Tt("#"+u+"-"+t,r).css({left:e.x,top:e.y,width:e.w,height:e.h})}<span class="cstat-no" title="statement not covered" ></span>$.each(a,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >Tt("#"+u+"-"+t.name,r).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}</span>),t("top",{x:n.x,y:n.y,w:n.w,h:e.y-n.y}),t("right",{x:e.x+e.w,y:e.y,w:n.w-e.x-e.w+n.x,h:e.h}),t("bottom",{x:n.x,y:e.y+e.h,w:n.w,h:n.h-e.y-e.h+n.y}),t("left",{x:n.x,y:e.y,w:e.x-n.x,h:e.h}),t("move",e)}</span>function <span class="fstat-no" title="function not covered" >p(</span>t){<span class="cstat-no" title="statement not covered" >h(l=t)}</span>function <span class="fstat-no" title="function not covered" >g(</span>t){var e,n;<span class="cstat-no" title="statement not covered" >p((e=s,{x:(n=t).x+e.x,y:n.y+e.y,w:n.w,h:n.h}))}<span class="cstat-no" title="statement not covered" ></span>return a=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],i=["top","right","bottom","left"],Tt('&lt;div id="'+u+'" class="'+e+'croprect-container" role="grid" aria-dropeffect="execute"&gt;').appendTo(r),$.each(i,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >Tt("#"+u,r).append('&lt;div id="'+u+"-"+t+'"class="'+e+'croprect-block" style="display: none" data-mce-bogus="all"&gt;')}</span>),$.each(a,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >Tt("#"+u,r).append('&lt;div id="'+u+"-"+t.name+'" class="'+e+"croprect-handle "+e+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false"&gt;')}</span>),t=$.map(a,<span class="fstat-no" title="function not covered" >fu</span>nction(e){var n;<span class="cstat-no" title="statement not covered" >return new(wt.get("DragHelper"))(u,{document:r.ownerDocument,handle:u+"-"+e.name,start:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >n=l}</span>,drag:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >c(e,n,t.deltaX,t.deltaY)}</span>})}</span>),h(l),Tt(r).on("focusin focusout",<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >Tt(t.target).attr("aria-grabbed","focus"===t.type)}</span>),Tt(r).on("keydown",<span class="fstat-no" title="function not covered" >fu</span>nction(e){var i;function <span class="fstat-no" title="function not covered" >t(</span>t,e,n,r,o){<span class="cstat-no" title="statement not covered" >t.stopPropagation(),t.preventDefault(),c(i,n,r,o)}<span class="cstat-no" title="statement not covered" ></span>switch($.each(a,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >if(e.target.id===u+"-"+t.name)<span class="cstat-no" title="statement not covered" >return i=t,!1}</span></span>),e.keyCode){case St.LEFT:<span class="cstat-no" title="statement not covered" >t(e,0,l,-10,0);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase St.RIGHT:<span class="cstat-no" title="statement not covered" >t(e,0,l,10,0);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase St.UP:<span class="cstat-no" title="statement not covered" >t(e,0,l,0,-10);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase St.DOWN:<span class="cstat-no" title="statement not covered" >t(e,0,l,0,10);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase St.ENTER:case St.SPACEBAR:<span class="cstat-no" title="statement not covered" >e.preventDefault(),o()}</span>}</span>),f=$.extend({toggleVisibility:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e;<span class="cstat-no" title="statement not covered" >e=$.map(a,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return"#"+u+"-"+t.name}</span>).concat($.map(i,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return"#"+u+"-"+t}</span>)).join(","),t?Tt(e,r).show():Tt(e,r).hide()}</span>,setClampRect:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >s=t,h(l)}</span>,setRect:p,getInnerRect:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return d(s,l)}</span>,setInnerRect:g,setViewPortRect:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >n=t,h(l)}</span>,destroy:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >$.each(t,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >t.destroy()}</span>),t=[]}</span>},Rt)}</span>(t,r.state.get("viewRect"),r.state.get("viewRect"),r.getEl(),<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >r.fire("crop")}</span>),r.cropRect.on("updateRect",<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >t.rect,</span>n=<span class="cstat-no" title="statement not covered" >r.zoom();<span class="cstat-no" title="statement not covered" ></span>e={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)},r.state.set("rect",e)}</span>),r.on("remove",r.cropRect.destroy)}<span class="cstat-no" title="statement not covered" ></span>r.state.on("change:cropEnabled",<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >r.cropRect.toggleVisibility(t.value),r.repaintImage()}</span>),r.state.on("change:zoom",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >r.repaintImage()}</span>),r.state.on("change:rect",<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >t.value;<span class="cstat-no" title="statement not covered" ></span>r.cropRect||n(e),r.cropRect.setRect(e)}</span>)}</span>}))(t)}</span>};</span>function <span class="fstat-no" title="function not covered" >Ct(</span>t){<span class="cstat-no" title="statement not covered" >return{blob:t,url:gt.createObjectURL(t)}}</span>function <span class="fstat-no" title="function not covered" >Et(</span>t){<span class="cstat-no" title="statement not covered" >t&amp;&amp;gt.revokeObjectURL(t.url)}</span>function <span class="fstat-no" title="function not covered" >Dt(</span>t){<span class="cstat-no" title="statement not covered" >$.each(t,Et)}</span>function <span class="fstat-no" title="function not covered" >At(</span>i,a,t,e){var u,n,r,c,o,l,s,f,d,h,p,g,m,y,v,b,w,x,I,T,R,S,O,F,C,E,D,A=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(){var n=<span class="cstat-no" title="statement not covered" >[],</span>r=<span class="cstat-no" title="statement not covered" >-1;</span>function <span class="fstat-no" title="function not covered" >t(</span>){<span class="cstat-no" title="statement not covered" >return 0&lt;r}</span>function <span class="fstat-no" title="function not covered" >e(</span>){<span class="cstat-no" title="statement not covered" >return-1!==r&amp;&amp;r&lt;n.length-1}<span class="cstat-no" title="statement not covered" ></span>return{data:n,add:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e;<span class="cstat-no" title="statement not covered" >return e=n.splice(++r),n.push(t),{state:t,removed:e}}</span>,undo:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >if(t())<span class="cstat-no" title="statement not covered" >return n[--r]}</span></span>,redo:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >if(e())<span class="cstat-no" title="statement not covered" >return n[++r]}</span></span>,canUndo:t,canRedo:e}}</span>(),</span>_=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return i.rtl?t.reverse():t}</span>;</span>function <span class="fstat-no" title="function not covered" >k(</span>t){var e,n,r,o;<span class="cstat-no" title="statement not covered" >e=u.find("#w")[0],n=u.find("#h")[0],r=parseInt(e.value(),10),o=parseInt(n.value(),10),u.find("#constrain")[0].checked()&amp;&amp;F&amp;&amp;C&amp;&amp;r&amp;&amp;o&amp;&amp;("w"===t.control.settings.name?(o=Math.round(r*E),n.value(o)):(r=Math.round(o*D),e.value(r))),F=r,C=o}</span>function <span class="fstat-no" title="function not covered" >L(</span>t){<span class="cstat-no" title="statement not covered" >return Math.round(100*t)+"%"}</span>function <span class="fstat-no" title="function not covered" >P(</span>){<span class="cstat-no" title="statement not covered" >u.find("#undo").disabled(!A.canUndo()),u.find("#redo").disabled(!A.canRedo()),u.statusbar.find("#save").disabled(!A.canUndo())}</span>function <span class="fstat-no" title="function not covered" >B(</span>){<span class="cstat-no" title="statement not covered" >u.find("#undo").disabled(!0),u.find("#redo").disabled(!0)}</span>function <span class="fstat-no" title="function not covered" >H(</span>t){<span class="cstat-no" title="statement not covered" >t&amp;&amp;f.imageSrc(t.url)}</span>function <span class="fstat-no" title="function not covered" >M(</span>e){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >$.grep(O,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.settings.name!==e}</span>);<span class="cstat-no" title="statement not covered" ></span>$.each(t,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >t.hide()}</span>),e.show(),e.focus()}</span>}</span>function <span class="fstat-no" title="function not covered" >N(</span>t){<span class="cstat-no" title="statement not covered" >H(c=Ct(t))}</span>function <span class="fstat-no" title="function not covered" >U(</span>t){<span class="cstat-no" title="statement not covered" >H(a=Ct(t)),Dt(A.add(a).removed),P()}</span>function <span class="fstat-no" title="function not covered" >j(</span>){var e=<span class="cstat-no" title="statement not covered" >f.selection();<span class="cstat-no" title="statement not covered" ></span>ht.blobToImageResult(a.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >ft.crop(t,e.x,e.y,e.w,e.h).then(q).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >U(t),z()}</span>)}</span>)}</span>var G=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e){var n=<span class="cstat-no" title="statement not covered" >[].slice.call(arguments,1);<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >c||a;<span class="cstat-no" title="statement not covered" ></span>ht.blobToImageResult(t.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >e.apply(this,[t].concat(n)).then(q).then(N)}</span>)}</span>}</span>;</span>function <span class="fstat-no" title="function not covered" >z(</span>){<span class="cstat-no" title="statement not covered" >H(a),Et(c),M(n)(),P()}</span>function <span class="fstat-no" title="function not covered" >V(</span>){<span class="cstat-no" title="statement not covered" >c?(U(c.blob),z()):function <span class="fstat-no" title="function not covered" >t(</span>e,n){<span class="cstat-no" title="statement not covered" >c?n():setTimeout(<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >0&lt;e--?t(e,n):i.windowManager.alert("Error: failed to apply image operation.")}</span>,10)}</span>(100,V)}</span>function <span class="fstat-no" title="function not covered" >W(</span>t){<span class="cstat-no" title="statement not covered" >return wt.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:t})}</span>var q=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.toBlob()}</span>;</span>function <span class="fstat-no" title="function not covered" >Y(</span>t,e){<span class="cstat-no" title="statement not covered" >return W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:V}])).hide().on("show",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >B(),ht.blobToImageResult(a.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e(t)}</span>).then(q).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >Ct(t);<span class="cstat-no" title="statement not covered" ></span>H(e),Et(c),c=e}</span>)}</span>)}</span>function <span class="fstat-no" title="function not covered" >X(</span>t,n,e,r,o){<span class="cstat-no" title="statement not covered" >return W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e;<span class="cstat-no" title="statement not covered" >e=t.value,ht.blobToImageResult(a.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return n(t,e)}</span>).then(q).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >Ct(t);<span class="cstat-no" title="statement not covered" ></span>H(e),Et(c),c=e}</span>)}</span>,minValue:i.rtl?o:r,maxValue:i.rtl?r:o,value:e,previewFilter:L},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:V}])).hide().on("show",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >this.find("slider").value(e),B()}</span>)}<span class="cstat-no" title="statement not covered" ></span>o=W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:j}])).hide().on("show hide",<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >f.toggleCropRect("show"===t.type)}</span>).on("show",B),l=W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:k},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:k},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >!0===t.control.value()&amp;&amp;(E=C/F,D=F/C)}</span>},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >parseInt(u.find("#w").value(),10),</span>n=<span class="cstat-no" title="statement not covered" >parseInt(u.find("#h").value(),10);<span class="cstat-no" title="statement not covered" ></span>t.preventDefault(),<span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >for(var t=[],n=1;n&lt;arguments.length;n++)<span class="cstat-no" title="statement not covered" >t[n-1]=arguments[n];v</span></span>ar r=<span class="cstat-no" title="statement not covered" >[].slice.call(arguments,1);<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >ht.blobToImageResult(a.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >e.apply(this,[t].concat(r)).then(q).then(U)}</span>)}</span>}</span>(ft.resize,e,n)(),z()}</span>).on("show",B),s=W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:G(ft.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:G(ft.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:G(ft.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:G(ft.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:V}])).hide().on("show",B),p=Y(0,ft.invert),I=Y(0,ft.sharpen),T=Y(0,ft.emboss),g=X(0,ft.brightness,0,-1,1),m=X(0,ft.hue,180,0,360),y=X(0,ft.saturate,0,-1,1),v=X(0,ft.contrast,0,-1,1),b=X(0,ft.grayscale,0,0,1),w=X(0,ft.sepia,0,0,1),x=<span class="fstat-no" title="function not covered" >fu</span>nction(t,o){function <span class="fstat-no" title="function not covered" >e(</span>){var e,n,r;<span class="cstat-no" title="statement not covered" >e=u.find("#r")[0].value(),n=u.find("#g")[0].value(),r=u.find("#b")[0].value(),ht.blobToImageResult(a.blob).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return o(t,e,n,r)}</span>).then(q).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >Ct(t);<span class="cstat-no" title="statement not covered" ></span>H(e),Et(c),c=e}</span>)}</span>var n=<span class="cstat-no" title="statement not covered" >i.rtl?2:0,</span>r=<span class="cstat-no" title="statement not covered" >i.rtl?0:2;<span class="cstat-no" title="statement not covered" ></span>return W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:n,value:1,maxValue:r,ondragend:e,previewFilter:L},{type:"slider",label:"G",name:"g",minValue:n,value:1,maxValue:r,ondragend:e,previewFilter:L},{type:"slider",label:"B",name:"b",minValue:n,value:1,maxValue:r,ondragend:e,previewFilter:L},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:V}])).hide().on("show",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >u.find("#r,#g,#b").value(1),B()}</span>)}</span>(0,ft.colorize),R=X(0,ft.gamma,0,-1,1),S=X(0,ft.exposure,1,0,2),r=W(_([{text:"Back",onclick:z},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:M(m)},{text:"saturate",icon:"saturate",onclick:M(y)},{text:"sepia",icon:"sepia",onclick:M(w)},{text:"emboss",icon:"emboss",onclick:M(T)},{text:"exposure",icon:"exposure",onclick:M(S)},{type:"spacer",flex:1}])).hide(),n=W(_([{tooltip:"Crop",icon:"crop",onclick:M(o)},{tooltip:"Resize",icon:"resize2",onclick:M(l)},{tooltip:"Orientation",icon:"orientation",onclick:M(s)},{tooltip:"Brightness",icon:"sun",onclick:M(g)},{tooltip:"Sharpen",icon:"sharpen",onclick:M(I)},{tooltip:"Contrast",icon:"contrast",onclick:M(v)},{tooltip:"Color levels",icon:"drop",onclick:M(x)},{tooltip:"Gamma",icon:"gamma",onclick:M(R)},{tooltip:"Invert",icon:"invert",onclick:M(p)}])),f=Ft.create({flex:1,imageSrc:a.url}),d=wt.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >H(a=A.undo()),P()}</span>},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >H(a=A.redo()),P()}</span>},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >f.zoom();<span class="cstat-no" title="statement not covered" ></span>t&lt;2&amp;&amp;(t+=.1),f.zoom(t)}</span>},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:<span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >f.zoom();<span class="cstat-no" title="statement not covered" ></span>.1&lt;t&amp;&amp;(t-=.1),f.zoom(t)}</span>}]}),h=wt.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:_([d,f])}),O=[n,o,l,s,r,p,g,m,y,v,b,w,x,I,T,R,S],(u=i.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(bt.DOM.getViewPort().w,800),minHeight:Math.min(bt.DOM.getViewPort().h,650),title:"Edit image",items:O.concat([h]),buttons:_([{text:"Save",name:"save",subtype:"primary",onclick:<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >t(a.blob),u.close()}</span>},{text:"Cancel",onclick:"close"}])})).on("close",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >e(),Dt(A.data),c=A=null}</span>),A.add(a),P(),f.on("load",<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >F=f.imageSize().w,C=f.imageSize().h,E=C/F,D=F/C,u.find("#w").value(F),u.find("#h").value(C)}</span>),f.on("crop",j)}</span>var _t,kt=<span class="cstat-no" title="statement not covered" >{edit:<span class="fstat-no" title="function not covered" >fu</span>nction(r,t){<span class="cstat-no" title="statement not covered" >return new yt(<span class="fstat-no" title="function not covered" >fu</span>nction(e,n){<span class="cstat-no" title="statement not covered" >return t.toBlob().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >At(r,Ct(t),e,n)}</span>)}</span>)}</span>},</span>Lt=<span class="cstat-no" title="statement not covered" >{getImageSize:<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e,n;function <span class="fstat-no" title="function not covered" >r(</span>t){<span class="cstat-no" title="statement not covered" >return/^[0-9\.]+px$/.test(t)}<span class="cstat-no" title="statement not covered" ></span>return e=t.style.width,n=t.style.height,e||n?r(e)&amp;&amp;r(n)?{w:parseInt(e,10),h:parseInt(n,10)}:null:(e=t.width,n=t.height,e&amp;&amp;n?{w:parseInt(e,10),h:parseInt(n,10)}:null)}</span>,setImageSize:<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r;<span class="cstat-no" title="statement not covered" >e&amp;&amp;(n=t.style.width,r=t.style.height,(n||r)&amp;&amp;(t.style.width=e.w+"px",t.style.height=e.h+"px",t.removeAttribute("data-mce-style")),n=t.width,r=t.height,(n||r)&amp;&amp;(t.setAttribute("width",e.w),t.setAttribute("height",e.h)))}</span>,getNaturalImageSize:<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return{w:t.naturalWidth,h:t.naturalHeight}}</span>},</span>Pt=(<span class="cstat-no" title="statement not covered" >_t="function",<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >if(null===t)<span class="cstat-no" title="statement not covered" >return"null";v</span></span>ar e=<span class="cstat-no" title="statement not covered" >typeof t;<span class="cstat-no" title="statement not covered" ></span>return"object"===e&amp;&amp;Array.prototype.isPrototypeOf(t)?"array":"object"===e&amp;&amp;String.prototype.isPrototypeOf(t)?"string":e}</span>(t)===_t}</span>)</span>,Bt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >for(var n=0,r=t.length;n&lt;r;n++){var o=<span class="cstat-no" title="statement not covered" >t[n];<span class="cstat-no" title="statement not covered" ></span>if(e(o,n,t))<span class="cstat-no" title="statement not covered" >return T.some(o)}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn T.none()}</span>;<span class="cstat-no" title="statement not covered" ></span>Array.prototype.slice;<span class="cstat-no" title="statement not covered" >P</span>t(Array.from)&amp;&amp;Array.from;v</span>ar Ht=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return null!==t&amp;&amp;t!==undefined}</span>,</span>Mt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n;<span class="cstat-no" title="statement not covered" >return n=e.reduce(<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Ht(t)?t[e]:undefined}</span>,t),Ht(n)?n:null}</span>,</span>Nt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return new yt(<span class="fstat-no" title="function not covered" >fu</span>nction(n){var t=<span class="cstat-no" title="statement not covered" >F();<span class="cstat-no" title="statement not covered" ></span>t.onload=<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >t.target;<span class="cstat-no" title="statement not covered" ></span>n(e.result)}</span>,t.readAsText(e)}</span>)}</span>,</span>Ut=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e,r,o){<span class="cstat-no" title="statement not covered" >return new yt(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var n;<span class="cstat-no" title="statement not covered" >(n=new(O.getOrDie("XMLHttpRequest"))).onreadystatechange=<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >4===n.readyState&amp;&amp;t({status:n.status,blob:this.response})}</span>,n.open("GET",e,!0),n.withCredentials=o,$.each(r,<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >n.setRequestHeader(e,t)}</span>),n.responseType="blob",n.send()}</span>)}</span>,</span>jt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){var e;<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >e=JSON.parse(t)}</span>catch(n){}<span class="cstat-no" title="statement not covered" >r</span>eturn e}</span>,</span>Gt=<span class="cstat-no" title="statement not covered" >[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],</span>zt=<span class="cstat-no" title="statement not covered" >[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],</span>Vt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return"ImageProxy HTTP error: "+Bt(Gt,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return e===t.code}</span>).fold(a("Unknown ImageProxy error"),<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.message}</span>)}</span>,</span>Wt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >Vt(t);<span class="cstat-no" title="statement not covered" ></span>return yt.reject(e)}</span>,</span>qt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e){<span class="cstat-no" title="statement not covered" >return Bt(zt,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.type===e}</span>).fold(a("Unknown service error"),<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.message}</span>)}</span>,</span>Yt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return Nt(e).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e,n,r=(<span class="cstat-no" title="statement not covered" >e=jt(t),"ImageProxy Service error: "+((n=Mt(e,["error","type"]))?qt(n):"Invalid JSON in service error message"))</span>;<span class="cstat-no" title="statement not covered" >return yt.reject(r)}</span>)}</span>,</span>Xt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return 400===(n=t)||403===n||500===n?Yt(0,e):Wt(t);v</span>ar n},</span>$t=<span class="cstat-no" title="statement not covered" >Wt,</span>Jt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r,o,i=<span class="cstat-no" title="statement not covered" >{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":e};<span class="cstat-no" title="statement not covered" ></span>return Ut((n=t,r=e,o=-1===n.indexOf("?")?"?":"&amp;",/[?&amp;]apiKey=/.test(n)||!r?n:n+o+"apiKey="+encodeURIComponent(r)),i,!1).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.status&lt;200||300&lt;=t.status?Xt(t.status,t.blob):yt.resolve(t.blob)}</span>)}</span>,</span>Kt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >return e?Jt(t,e):Ut(t,{},n).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.status&lt;200||300&lt;=t.status?$t(t.status):yt.resolve(t.blob)}</span>)}</span>,</span>Zt=<span class="cstat-no" title="statement not covered" >0,</span>Qt=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >t.notificationManager.open({text:e,type:"error"})}</span>,</span>te=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return t.selection.getNode()}</span>,</span>ee=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n=<span class="cstat-no" title="statement not covered" >e.src;<span class="cstat-no" title="statement not covered" ></span>return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new vt(n).host===t.documentBaseURI.host}</span>,</span>ne=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return-1!==$.inArray(t.getParam("imagetools_cors_hosts",[],"string[]"),new vt(e.src).host)}</span>,</span>re=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){var n,r,o,i,a=<span class="cstat-no" title="statement not covered" >e.src;<span class="cstat-no" title="statement not covered" ></span>return ne(t,e)?Kt(e.src,null,(r=t,o=e,-1!==$.inArray(r.getParam("imagetools_credentials_hosts",[],"string[]"),new vt(o.src).host))):ee(t,e)?B(e):(a=t.getParam("imagetools_proxy"),a+=(-1===a.indexOf("?")?"?":"&amp;")+"url="+encodeURIComponent(e.src),n=(i=t).getParam("api_key",i.getParam("imagetools_api_key","","string"),"string"),Kt(a,n,!1))}</span>,</span>oe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){var e;<span class="cstat-no" title="statement not covered" >return(e=t.editorUpload.blobCache.getByUri(te(t).src))?yt.resolve(e.blob()):re(t,te(t))}</span>,</span>ie=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >clearTimeout(t.get())}</span>,</span>ae=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(c,l,s,f,d){<span class="cstat-no" title="statement not covered" >return l.toBlob().then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e,n,r,o,i,a,u;<span class="cstat-no" title="statement not covered" >return r=c.editorUpload.blobCache,e=(i=te(c)).src,c.getParam("images_reuse_filename",!1,"boolean")&amp;&amp;((o=r.getByUri(e))?(e=o.uri(),n=o.name()):(a=c,n=(u=e.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i))?a.dom.encode(u[1]):null)),o=r.create({id:"imagetools"+Zt++,blob:t,base64:l.toBase64(),uri:e,name:n}),r.add(o),c.undoManager.transact(<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >c.$(i).on("load",function <span class="fstat-no" title="function not covered" >t(</span>){var e,n,r;<span class="cstat-no" title="statement not covered" >c.$(i).off("load",t),c.nodeChanged(),s?c.editorUpload.uploadImagesAuto():(ie(f),e=c,n=f,r=mt.setEditorTimeout(e,<span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >e.editorUpload.uploadImagesAuto()}</span>,e.getParam("images_upload_timeout",3e4,"number")),n.set(r))}</span>),d&amp;&amp;c.$(i).attr({width:d.w,height:d.h}),c.$(i).attr({src:o.blobUri()}).removeAttr("data-mce-src")}</span>),o}</span>)}</span>,</span>ue=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e,n,t,r){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return e._scanForImages().then(u(oe,e)).then(ht.blobToImageResult).then(t).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return ae(e,t,!1,n,r)}</span>,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >Qt(e,t)}</span>)}</span>}</span>,</span>ce=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(n,r,o){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){var t=<span class="cstat-no" title="statement not covered" >Lt.getImageSize(te(n)),</span>e=<span class="cstat-no" title="statement not covered" >t?{w:t.h,h:t.w}:null;<span class="cstat-no" title="statement not covered" ></span>return ue(n,r,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return ft.rotate(t,o)}</span>,e)()}</span>}</span>,</span>le=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e,n){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){<span class="cstat-no" title="statement not covered" >return ue(t,e,<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return ft.flip(t,n)}</span>)()}</span>}</span>,</span>se=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(e,r){<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >fu</span>nction(){var o=<span class="cstat-no" title="statement not covered" >te(e),</span>i=<span class="cstat-no" title="statement not covered" >Lt.getNaturalImageSize(o),</span>n=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(r){<span class="cstat-no" title="statement not covered" >return new yt(<span class="fstat-no" title="function not covered" >fu</span>nction(n){<span class="cstat-no" title="statement not covered" >P(r).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >Lt.getNaturalImageSize(t);<span class="cstat-no" title="statement not covered" ></span>i.w===e.w&amp;&amp;i.h===e.h||Lt.getImageSize(o)&amp;&amp;Lt.setImageSize(o,e),gt.revokeObjectURL(t.src),n(r)}</span>)}</span>)}</span>;<span class="cstat-no" title="statement not covered" ></span>oe(e).then(ht.blobToImageResult).then(u(<span class="fstat-no" title="function not covered" >fu</span>nction(e,t){<span class="cstat-no" title="statement not covered" >return kt.edit(e,t).then(n).then(ht.blobToImageResult).then(<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >return ae(e,t,!0,r)}</span>,<span class="fstat-no" title="function not covered" >fu</span>nction(){})}</span>,e),<span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >Qt(e,t)}</span>)}</span>}</span>,</span>fe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >return t.dom.is(e,"img:not([data-mce-object],[data-mce-placeholder])")&amp;&amp;(ee(t,e)||ne(t,e)||t.settings.imagetools_proxy)}</span>,</span>de=<span class="cstat-no" title="statement not covered" >ie,</span>he=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(n,t){<span class="cstat-no" title="statement not covered" >$.each({mceImageRotateLeft:ce(n,t,-90),mceImageRotateRight:ce(n,t,90),mceImageFlipVertical:le(n,t,"v"),mceImageFlipHorizontal:le(n,t,"h"),mceEditImage:se(n,t)},<span class="fstat-no" title="function not covered" >fu</span>nction(t,e){<span class="cstat-no" title="statement not covered" >n.addCommand(e,t)}</span>)}</span>,</span>pe=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(n,r,o){<span class="cstat-no" title="statement not covered" >n.on("NodeChange",<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >o.get();<span class="cstat-no" title="statement not covered" ></span>e&amp;&amp;e.src!==t.element.src&amp;&amp;(de(r),n.editorUpload.uploadImagesAuto(),o.set(null)),fe(n,t.element)&amp;&amp;o.set(t.element)}</span>)}</span>,</span>ge=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >t.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),t.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),t.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),t.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),t.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),t.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}</span>,</span>me=<span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" >fu</span>nction(t){<span class="cstat-no" title="statement not covered" >t.addContextToolbar(u(fe,t),t.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions"))}</span>;<span class="cstat-no" title="statement not covered" ></span>t.add("imagetools",<span class="fstat-no" title="function not covered" >fu</span>nction(t){var e=<span class="cstat-no" title="statement not covered" >r(0),</span>n=<span class="cstat-no" title="statement not covered" >r(null);<span class="cstat-no" title="statement not covered" ></span>he(t,e),ge(t),me(t),pe(t,e,n)}</span>)}</span>(window);</span></pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Fri Apr 12 2019 12:05:34 GMT+0800 (Singapore Standard Time)
</div>
</div>
<script src="../../../../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../../../../sorter.js"></script>
<script src="../../../../../../../block-navigation.js"></script>
</body>
</html>
